<?php
//This is generated by Swapp Software Application on 02/05/2019 04:14:29 PM for PHP
require_once("../swappbase/formbase.php");
class vehiclelist extends swappform
{
    public function __construct(&$connection)
    {
     		 parent::__construct($connection);
    }
    public function getvehiclelistpendingfortoken($tokenbasecode)
    {
        $this->dataoperationmode = operationmode::Select;
        if ($tokenbasecode==1)
        {
            $cond='vehiclecategorycode in (1,2)';
        }
        elseif ($tokenbasecode==2)
        {
            $cond='vehiclecategorycode in (3,4)';
        }
        $query = "select seasoncode,VEHICLECATEGORYCODE,VEHICLECATEGORYNAMEUNI,tripdate,vehiclenumber,tripnumber
        from vw_pending_for_token_list
        where {$cond} 
        group by seasoncode,VEHICLECATEGORYCODE,VEHICLECATEGORYNAMEUNI,tripdate,vehiclenumber,tripnumber";
        $result = oci_parse($this->connection, $query);
        return $result;
    }
    public function getvehiclelistpendingforloadwt($tokenbasecode)
    {
        $this->dataoperationmode = operationmode::Select;
        if ($tokenbasecode==1)
        {
            $cond='vehiclecategorycode in (1,2)';
        }
        elseif ($tokenbasecode==2)
        {
            $cond='vehiclecategorycode in (3,4)';
        }
        $query = "select *
        from VW_PENDING_FOR_LOADWT_LIST
        where {$cond}
        order by tokenbasecode,tokendate,tokennumber";
        $result = oci_parse($this->connection, $query);
        return $result;
    }
    public function getvehiclelistpendingforemptywt($tokenbasecode)
    {
        $this->dataoperationmode = operationmode::Select;
        if ($tokenbasecode==1)
        {
            $cond='vehiclecategorycode in (1,2)';
        }
        elseif ($tokenbasecode==2)
        {
            $cond='vehiclecategorycode in (3,4)';
        }
        $query = "select *
        from VW_PENDING_FOR_EMPTYWT_LIST
        where {$cond}";
        $result = oci_parse($this->connection, $query);
        return $result;
    }
    public function gettripfieldslipdetail($seasoncode,$tripnumber)
    {
        $this->dataoperationmode = operationmode::Select;
        $cond='seasoncode='.$seasoncode.' and tripnumber='.$tripnumber;
        $query = "select *
        from vw_trip_fieldslip_detail
        where {$cond}";
        $result = oci_parse($this->connection, $query);
        return $result;
    }
}
?>

